***************
*** 478,483 ****
  	char *id, *new_id;
  	type_datum_t *alias, *new_alias;
  	expand_state_t *state;
  
  	id = (char *)key;
  	alias = (type_datum_t *) datum;
--- 478,484 ----
  	char *id, *new_id;
  	type_datum_t *alias, *new_alias;
  	expand_state_t *state;
+ 	uint32_t prival;
  
  	id = (char *)key;
  	alias = (type_datum_t *) datum;
***************
*** 491,496 ****
  	if (alias->flavor == TYPE_ATTRIB)
  		return 0;
  
  	if (state->verbose)
  		INFO(state->handle, "copying alias %s", id);
  
--- 492,509 ----
  	if (alias->flavor == TYPE_ATTRIB)
  		return 0;
  
+ 	if (alias->flavor == TYPE_ALIAS) 
+ 		prival = alias->primary;
+ 	else 
+ 		prival = alias->s.value;
+ 
+ 	if (!is_id_enabled(state->base->p_type_val_to_name[prival - 1],
+ 			state->base, SYM_TYPES)) {
+ 		/* The primary type for this alias is not enabled, the alias 
+  		 * shouldn't be either */
+ 		return 0;
+ 	}
+ 		
  	if (state->verbose)
  		INFO(state->handle, "copying alias %s", id);
  
